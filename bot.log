discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c2d73520e08b3db6ec1e7ec545f95a08).
root - INFO - Created directory: input
root - INFO - Successfully saved attachment to input/attachment6780401.png
root - INFO - Processing image: input/attachment6780401.png
discord.app_commands.tree - ERROR - Ignoring exception in command 'style'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await style_images(prompt, attachment, negative_prompt, batch_size, width, height)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 347, in style_images
    json.dump(workflow, f)
  File "/home/alex/miniconda3/lib/python3.11/json/__init__.py", line 179, in dump
    for chunk in iterable:
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Attachment is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'style' raised an exception: TypeError: Object of type Attachment is not JSON serializable
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() running at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1312> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 9bda69325086dea1f5b246465b33fe6c).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 892f72400f5910a4ab94c66de9cd5c93).
root - INFO - Successfully saved attachment to input/attachment2208224.png
root - INFO - Processing image: input/attachment2208224.png
discord.app_commands.tree - ERROR - Ignoring exception in command 'style'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await style_images(prompt, attachment, negative_prompt, batch_size, width, height)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 353, in style_images
    json.dump(workflow, f)
  File "/home/alex/miniconda3/lib/python3.11/json/__init__.py", line 179, in dump
    for chunk in iterable:
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Attachment is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'style' raised an exception: TypeError: Object of type Attachment is not JSON serializable
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() running at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1312> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 457d4851f46c81cd9488e532411e87d4).
root - INFO - Successfully saved attachment to input/attachment8737753.png
root - INFO - Processing image: input/attachment8737753.png
discord.app_commands.tree - ERROR - Ignoring exception in command 'style'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await style_images(prompt, attachment, negative_prompt, batch_size, width, height)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 304, in style_images
    workflow = edit_given_nodes_properties(workflow, styleimage_nodes, 'image', attachment)
                                           ^^^^^^^^
UnboundLocalError: cannot access local variable 'styleimage_nodes' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'style' raised an exception: UnboundLocalError: cannot access local variable 'styleimage_nodes' where it is not associated with a value
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c3661c9c613c3a36ba830bedf32d978c).
root - INFO - Successfully saved attachment to input/attachment8172463.png
root - INFO - Processing image: input/attachment8172463.png
root - INFO - Workflow successfully dumped to JSON.
discord.app_commands.tree - ERROR - Ignoring exception in command 'style'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await style_images(prompt, attachment, negative_prompt, batch_size, width, height)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 365, in style_images
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'style' raised an exception: HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() running at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1312> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: bb629ca28322b7c6a93aac899ea30754).
root - INFO - Successfully saved attachment to input/attachment8986691.png
root - INFO - Processing image: input/attachment8986691.png
root - INFO - Workflow successfully dumped to JSON.
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 08cc7cb8901a9a61331f3ef2117c579f).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 74f0c775cb14616afb83695ac408d7e7).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: b552a6a0faa3d0c0bd69457deb426c3d).
root - INFO - Successfully saved attachment to input/attachment3487643.png
root - INFO - Processing image: input/attachment3487643.png
root - INFO - Workflow successfully dumped to JSON.
root - INFO - Successfully saved attachment to input/attachment7453457.png
root - INFO - Processing image: input/attachment7453457.png
root - INFO - Workflow successfully dumped to JSON.
root - INFO - Successfully saved attachment to input/attachment9936241.png
root - INFO - Processing image: input/attachment9936241.png
root - INFO - Workflow successfully dumped to JSON.
root - INFO - Successfully saved attachment to input/attachment3115063.png
root - INFO - Processing image: input/attachment3115063.png
root - INFO - Workflow successfully dumped to JSON.
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-65' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: bf4c2c93125ed06c7f77a4f2d52d152d).
root - INFO - Successfully saved attachment to input/attachment5481204.png
root - INFO - Processing image: input/attachment5481204.png
root - INFO - Workflow successfully dumped to JSON.
root - INFO - Successfully saved attachment to input/attachment3750750.png
root - INFO - Processing image: input/attachment3750750.png
root - INFO - Workflow successfully dumped to JSON.
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 192d7e298121a82853a5129125505428).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ffbe2bd14a9a48b5307d92b7f6e2a5a3).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4884676b6f65721f42bd6498a9cc13a3).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 354bcc8e4073fc61e4b2f9594e52b0c2).
root - INFO - Successfully saved attachment to input/attachment9625976.png
root - INFO - Processing image: input/attachment9625976.png
root - INFO - Workflow successfully dumped to JSON.
root - INFO - Successfully saved attachment to input/attachment851066.png
root - INFO - Processing image: input/attachment851066.png
root - INFO - Workflow successfully dumped to JSON.
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c5fd864e9054f4b18d62f4439ad4ae45).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ca1562b0f20595e61398b1badc9c218e).
root - INFO - Successfully saved attachment to input/attachment9043958.png
root - INFO - Processing image: input/attachment9043958.png
root - INFO - Workflow successfully dumped to JSON.
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4f2be3993f892a5ef07a5e126b82d49e).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 259, in generate_images
    upload_image(filepath=inputname)
                          ^^^^^^^^^
UnboundLocalError: cannot access local variable 'inputname' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: UnboundLocalError: cannot access local variable 'inputname' where it is not associated with a value
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 7d0503eae9bfdc17346f8dc198949131).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 259, in generate_images
    upload_image(filepath=inputname)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 45, in upload_image
    files = {'image': open(filepath, 'rb')}
                      ^^^^^^^^^^^^^^^^^^^^
TypeError: expected str, bytes or os.PathLike object, not NoneType

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: expected str, bytes or os.PathLike object, not NoneType
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 259, in generate_images
    upload_image(filepath=inputname)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 45, in upload_image
    files = {'image': open(filepath, 'rb')}
                      ^^^^^^^^^^^^^^^^^^^^
TypeError: expected str, bytes or os.PathLike object, not NoneType

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: expected str, bytes or os.PathLike object, not NoneType
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-14' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-19' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 22baf68b00817553e51a0c901c9cef19).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 259, in generate_images
    upload_image(filepath=inputname)
                          ^^^^^^^^^
UnboundLocalError: cannot access local variable 'inputname' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: UnboundLocalError: cannot access local variable 'inputname' where it is not associated with a value
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 8f1c0c7908de8a86b3e8afc5b1fe6f39).
root - INFO - Workflow successfully dumped to JSON.
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 310, in generate_images
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 36dbeaeab6e82307071c4aa1b5c7adf5).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 248, in generate_images
    model_name_adjusted = model.add('.safetensors')[0]  # Assuming model parameter might include '.safetensors'
                          ^^^^^^^^^
AttributeError: 'str' object has no attribute 'add'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'str' object has no attribute 'add'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: aa402f7fa672b8ba1c5cbf1d84dd5b2a).
root - INFO - Workflow successfully dumped to JSON.
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 310, in generate_images
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 83455f5484d02fb6d0ed4c5e8a09aa3f).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 173, in generate_images
    if styleimage_nodes:
       ^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'styleimage_nodes' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: UnboundLocalError: cannot access local variable 'styleimage_nodes' where it is not associated with a value
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 9118f69c92d6bf63f571154217816d82).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 39c1db76b772b3db620c78c20825727d).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 236, in generate_images
    workflow = edit_given_nodes_properties(workflow, latent_image_nodes, 'batch_size', batch_size)
                                                     ^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'latent_image_nodes' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: UnboundLocalError: cannot access local variable 'latent_image_nodes' where it is not associated with a value
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: de54b7740aa6e33e6543fe73c03231ee).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 249, in generate_images
    workflow = edit_given_nodes_properties(workflow, widthnode, 'width', width if width is not None else default_width)
                                                     ^^^^^^^^^
UnboundLocalError: cannot access local variable 'widthnode' where it is not associated with a value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: UnboundLocalError: cannot access local variable 'widthnode' where it is not associated with a value
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d57520f8edf64ae3b8a6f4e8a4eedda0).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 251, in generate_images
    workflow = edit_given_nodes_properties(workflow, widthnode, 'width', width if width is not None else default_width)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 118, in edit_given_nodes_properties
    if counter in chosen_nodes:
       ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: argument of type 'NoneType' is not iterable
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: bbedd7b72af078a1e94e945f34b17a89).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 158, in slash_command
    images = await generate_images(prompt, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 252, in generate_images
    workflow = edit_given_nodes_properties(workflow, widthnode, 'width', width if width is not None else default_width)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 125, in edit_given_nodes_properties
    raise ValueError("Cannot find the chosen nodes")
ValueError: Cannot find the chosen nodes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: Cannot find the chosen nodes
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: f1da8dac5169d1fbefd6a7bdf87b0e43).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-16' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 821b08c5348124de3715a456b8f2f963).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6717769ff931fd5731766b8ac5399b3c).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-16' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: efbb29db185566171ab86726c9ad1044).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: dfb2c3a7e7f8d89d62348c58fa978d69).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 628925c9139e9d1d168e42cbc08b4adf).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-16' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 44930e0a6c900631579ac91ada47fa98).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6e5d6da45b62c56ce503da3e9fb7de3c).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-14' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d309cfd6b706f42f94226d1e49cc2b07).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-14' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c01502cbff7b348a21dd68e80b2b8670).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a666191ef38c640e714e840a89948f7e).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 716694aa44dd919674874136a47bfd5d).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 73c473604160623fa3f91b01469c39cd).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 163, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 42a4d47a097aca5a60131e45227c891b).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 160, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 224, in generate_images
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: eb0a35c416583d7ed2be7e2d4563e335).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 161, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 224, in generate_images
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-16' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 28f35ce7658a26c4fb2f3d93aa0e01c8).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 28ea29fc3f1180a06b189963bc03a0d2).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'coroutine' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'coroutine' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 7bb93fd2ae71d63750cde06baf6b1f71).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'coroutine' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'coroutine' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: b7f25db269615c14343538f0119dc997).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'coroutine' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'coroutine' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ee1ac81d5ec91d5518984f38c912d61a).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'coroutine' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'coroutine' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: cc78e4146d012836276200edbd435def).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'coroutine' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'coroutine' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 3839d57b271d370e867cacf38a859470).
root - ERROR - Attachment is not a discord.Attachment instance: <class 'NoneType'>
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 169, in slash_command
    await interaction.channel.send(content=final_message, file=discord.File(fp=create_collage(images), filename='collage.png'), view=Buttons(prompt,negative_prompt,images))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 38, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: e45f9c58ebb425833b5857e6dab047a6).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 2600b38fe24397a99645c3cd2a9b08cc).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 165, in slash_command
    images = await generate_images(negative_prompt, batch_size, width, height, model, prompt=promptgen, )
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: generate_images() got multiple values for argument 'prompt'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() got multiple values for argument 'prompt'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 3d8f750caa25ce09ed66f90602c494de).
discord.gateway - INFO - Shard ID None has successfully RESUMED session 3d8f750caa25ce09ed66f90602c494de.
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='V1' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 114, in generate_alternatives_and_send
    images = await generate_alternatives(self.images[index], self.prompt, self.negative_prompt)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 397, in generate_alternatives
    prompt_nodes = search_for_nodes_with_key('Positive Prompt', workflow, 'title', whether_to_use_meta=True)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 106, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-138' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: abf2773d048a9fd47ce879fafa82c6c8).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='V2' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 114, in generate_alternatives_and_send
    images = await generate_alternatives(self.images[index], self.prompt, self.negative_prompt)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 397, in generate_alternatives
    prompt_nodes = search_for_nodes_with_key('Positive Prompt', workflow, 'title', whether_to_use_meta=True)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 106, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-30' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a3fc394a39a972e31851b2ad55ee6cec).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 159, in slash_command
    images = await style_images(promptgen, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 299, in style_images
    workflow = edit_given_nodes_properties(workflow, prompt_nodes, 'text', prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 126, in edit_given_nodes_properties
    raise ValueError("Cannot find the chosen nodes")
ValueError: Cannot find the chosen nodes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: Cannot find the chosen nodes
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-18' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: db84d2c41d2941791c1d2115230d7cdd).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='V3' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 114, in generate_alternatives_and_send
    images = await generate_alternatives(self.images[index], self.prompt, self.negative_prompt)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 397, in generate_alternatives
    prompt_nodes = search_for_nodes_with_key('Positive Prompt', workflow, 'title', whether_to_use_meta=True)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 106, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U3' emoji=<PartialEmoji animated=False name='' id=None> row=2>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 430, in upscale_image
    file_input_nodes = search_for_nodes_with_key('Load Image', workflow, 'title', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 106, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-28' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-36' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 5f49b2c0eb598b654f7e7b2bf894c8be).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 159, in slash_command
    images = await style_images(promptgen, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 298, in style_images
    workflow = edit_given_nodes_properties(workflow, prompt_nodes, 'text', prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 125, in edit_given_nodes_properties
    raise ValueError("Cannot find the chosen nodes")
ValueError: Cannot find the chosen nodes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: Cannot find the chosen nodes
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 01b64fe3abeffbf212a39bc16fda2afb).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 781445365670dc955b2ef126b7c36f97).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U4' emoji=<PartialEmoji animated=False name='' id=None> row=2>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 431, in upscale_image
    file_input_nodes = search_for_nodes_with_key('Load Image', workflow, 'title', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 107, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-29' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 67a03ae486dc4af426e26659afb95e14).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U4' emoji=<PartialEmoji animated=False name='' id=None> row=2>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 432, in upscale_image
    file_input_nodes = search_for_nodes_with_key('Load Image', workflow, 'title', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 108, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-29' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 7a1ac787c33987b35b45000084afbeee).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 159, in slash_command
    images = await style_images(promptgen, attachment, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 293, in style_images
    prompt_nodes = search_for_nodes_with_key('Positive Prompt', workflow, 'title', whether_to_use_meta=True)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 107, in search_for_nodes_with_key
    node = json.loads(workflow[node])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not dict

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: the JSON object must be str, bytes or bytearray, not dict
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-18' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 3121a2fa76196d6e40b794cd54f2fff6).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=9> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U4' emoji=<PartialEmoji animated=False name='' id=None> row=2>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 434, in upscale_image
    file_input_nodes = search_for_nodes_with_key('Load Image', workflow, 'title', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 110, in search_for_nodes_with_key
    if node["_meta"].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-29' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d91c4c7da066813cd30ef6e7b8b680d8).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=3> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U1' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 435, in upscale_image
    file_input_nodes = search_for_nodes_with_key('Load Image', workflow, 'title', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 110, in search_for_nodes_with_key
    print(node['_meta'])
          ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-24' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ae675424626fa3b1ee9f3a2b08ce41b7).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 547de9fa370b84c80d20b04a47e60082).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=3> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U1' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 435, in upscale_image
    file_input_nodes = search_for_nodes_with_key('LoadImage', workflow, 'class_type', whether_to_use_meta=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 110, in search_for_nodes_with_key
    if node['_meta'].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-24' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 1bd2c569fc36f99976eab6cb186bcc3b).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: b937fc0292600ca70d6dc86142593e41).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 161, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 164, in generate_images
    if(prompt != None and prompt_nodes[0] != ''):
                          ~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: 'NoneType' object is not subscriptable
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 5eb92896bbbee118ff2f10c5fcc27efd).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: e0dd5ee82a8b0afb9e0e78d24cb1cb0f).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 161, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 156, in generate_images
    prompt_nodes = search_for_nodes_with_key('Positive Prompt', workflow, 'title', whether_to_use_meta=True)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 113, in search_for_nodes_with_key
    if node['_meta'].get(key) == value:
       ~~~~^^^^^^^^^
KeyError: '_meta'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: KeyError: '_meta'
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 812af6e776252b940dd57f7099e0519f).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 161, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 160, in generate_images
    workflow = edit_given_nodes_properties(workflow, prompt_nodes, 'text', prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 124, in edit_given_nodes_properties
    raise ValueError("Cannot find the chosen nodes")
ValueError: Cannot find the chosen nodes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: Cannot find the chosen nodes
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-15' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: cc52b697d3d383a92e76e583e533451e).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 161, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 157, in generate_images
    workflow = edit_given_nodes_properties(workflow, prompt_nodes, 'text', prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 121, in edit_given_nodes_properties
    raise ValueError("Cannot find the chosen nodes")
ValueError: Cannot find the chosen nodes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: Cannot find the chosen nodes
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: b88626568be4efbc8b0974e6b2b4bd8a).
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 156, in slash_command
    await interaction.response.send_message(f"{interaction.user.mention} asked me to imagine \"{prompt}\", this shouldn't take too long...")
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/interactions.py", line 801, in send_message
    await adapter.create_interaction_response(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/webhook/async_.py", line 219, in request
    raise NotFound(response, data)
discord.errors.NotFound: 404 Not Found (error code: 10062): Unknown interaction

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: NotFound: 404 Not Found (error code: 10062): Unknown interaction
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 24c9be28f9c1ff263bf8bf540966be97).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: de034ef474dd73303e2be98a01cf3d7c).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 81c48df764eef725dffffecf98a09678).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 02c419a6e98e420a8a893f6bbc20e922).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=3> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U1' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 429, in upscale_image
    file_input_nodes = search_for_nodes_with_key('LoadImage', workflow, 'class_type', whether_to_use_meta=fa)
                                                                                                          ^^
NameError: name 'fa' is not defined
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-26' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c1a95d48dacfc8a0ea4f287687d3d2db).
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=180 children=3> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U1' emoji=<PartialEmoji animated=False name='' id=None> row=1>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 82, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 122, in upscale_and_send
    upscaled_image = await upscale_image(self.images[index], self.prompt, self.negative_prompt)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 436, in upscale_image
    images = await generator.get_images(workflow)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 69, in get_images
    prompt_id = queue_prompt(prompt, self.client_id)['prompt_id']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 31, in queue_prompt
    return json.loads(urllib.request.urlopen(req).read())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-24' coro=<WebSocketCommonProtocol.close_connection() done, defined at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1286> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a56eb3e21b28e961468e23a196c2218e).
discord.client - ERROR - Ignoring exception in on_ready
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3304, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 308, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 352, in connect
    await_only(connection),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 140, in _connect
    self._connection = await future
                       ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 392, in connector
    return sqlite3.connect(loc, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: unable to open database file

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/client.py", line 441, in _run_event
    await coro(*args, **kwargs)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 75, in on_ready
    await init_db()  # Initialize DB
    ^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/db.py", line 65, in init_db
    async with engine.begin() as conn:
  File "/home/alex/miniconda3/lib/python3.11/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/engine.py", line 1063, in begin
    async with conn:
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/base.py", line 121, in __aenter__
    return await self.start(is_ctxmanager=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/engine.py", line 273, in start
    await greenlet_spawn(self.sync_engine.connect)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3280, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2444, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3304, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 308, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 352, in connect
    await_only(connection),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 140, in _connect
    self._connection = await future
                       ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 392, in connector
    return sqlite3.connect(loc, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unable to open database file
(Background on this error at: https://sqlalche.me/e/20/e3q8)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 94f46d4076a5e7e52ea08d440b5dce89).
discord.client - ERROR - Ignoring exception in on_ready
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/client.py", line 441, in _run_event
    await coro(*args, **kwargs)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 75, in on_ready
    await init_db()  # Initialize DB
          ^^^^^^^^^
TypeError: init_db() missing 1 required positional argument: 'engine'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 8ca29374755183d4595e0970b28984e3).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	data BLOB, 
	url VARCHAR, 
	PRIMARY KEY (id), 
	UNIQUE (url)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, modelname)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: generate_images() missing 1 required positional argument: 'model'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() missing 1 required positional argument: 'model'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 25e9e70c6d8fb6231142e9a3a5dc8850).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 176, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: generate_images() missing 1 required positional argument: 'model'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() missing 1 required positional argument: 'model'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 2cd5c0905dadd0e8a5c8befb62b07fb2).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 177, in slash_command
    images = await generate_images(promptgen, negative_prompt, batch_size, width, height, model=modelname)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: generate_images() missing 1 required positional argument: 'height'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() missing 1 required positional argument: 'height'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4f27e0b706be6147de90e1b1dd0bb7f2).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 236, in slash_command
    images = await generate_images(
                   ^^^^^^^^^^^^^^^^
TypeError: generate_images() got an unexpected keyword argument 'promptgen'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() got an unexpected keyword argument 'promptgen'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 027eb6ade7bdba4961fba4e9c31aa462).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 236, in slash_command
    images = await generate_images(
                   ^^^^^^^^^^^^^^^^
TypeError: generate_images() missing 1 required positional argument: 'user_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: generate_images() missing 1 required positional argument: 'user_id'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a366e60cfa4d1c5438fabb95a906c839).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 239, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 168, in generate_images
    await init_db()
          ^^^^^^^^^
TypeError: init_db() missing 1 required positional argument: 'engine'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: init_db() missing 1 required positional argument: 'engine'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 75b2cdc61945df4d216630555fb75786).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 239, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 243, in generate_images
    new_image = Image(
                ^^^^^^
TypeError: 'module' object is not callable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: 'module' object is not callable
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 90b3e0a11b9b181508126b9896a57487).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (data, url) VALUES (?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] (None, <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FC86B2415D0>)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.ProgrammingError: Error binding parameter 2: type 'PngImageFile' is not supported

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 239, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 250, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 2: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (data, url) VALUES (?, ?)]
[parameters: (None, <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FC86B2415D0>)]
(Background on this error at: https://sqlalche.me/e/20/f405)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 2: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (data, url) VALUES (?, ?)]
[parameters: (None, <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FC86B2415D0>)]
(Background on this error at: https://sqlalche.me/e/20/f405)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 74f96930b5fee79cb3ff66fb67850399).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: eb73909c07365cf7719c9af0bb7390db).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 239, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 245, in generate_images
    img_byte_arr.write(get_image(image_path, "images", "output"))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 39, in get_image
    with urllib.request.urlopen(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 525, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 634, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 563, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 496, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/urllib/request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 404: Not Found

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: HTTPError: HTTP Error 404: Not Found
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 295a02d64767a8d1d2517583740de10f).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 239, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 245, in generate_images
    img_byte_arr.write(image_path, "images", "output")
TypeError: BytesIO.write() takes exactly one argument (3 given)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: BytesIO.write() takes exactly one argument (3 given)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 17551d4baeec46f5d4d6af1973ed0057).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 7332a4a53b5df898822fd7a5f33f7a45).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 252, in generate_images
    img_byte_arr.write(image_path, "images", "output")
TypeError: BytesIO.write() takes exactly one argument (3 given)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: BytesIO.write() takes exactly one argument (3 given)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 0b56ea879a88889ef4ce6af1a05e89e0).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: f4626efa49f7706be8e0970146d0aa6c).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 252, in generate_images
    img_byte_arr.write(image_path)
TypeError: a bytes-like object is required, not 'PngImageFile'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: a bytes-like object is required, not 'PngImageFile'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 9da9b02e1ea02d6602b41f00553e93ca).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 249, in generate_images
    with Image.open(image_path) as img:
         ^^^^^^^^^^
AttributeError: type object 'Image' has no attribute 'open'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: type object 'Image' has no attribute 'open'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 498039ade5a2a7ec7d2efb446747b979).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 251, in generate_images
    with PILImage.open(image_path) as img:
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/PIL/Image.py", line 3256, in open
    prefix = fp.read(16)
             ^^^^^^^
AttributeError: 'PngImageFile' object has no attribute 'read'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'PngImageFile' object has no attribute 'read'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 219f70b9c72a9655e39fef6a55dae988).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 251, in generate_images
    with open(image_path) as img:
         ^^^^^^^^^^^^^^^^
TypeError: expected str, bytes or os.PathLike object, not PngImageFile

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: expected str, bytes or os.PathLike object, not PngImageFile
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 0117dde06e6b93f27d0b7ea5972cbaa9).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 251, in generate_images
    with open(image_path, 'rb') as img:
         ^^^^^^^^^^^^^^^^^^^^^^
TypeError: expected str, bytes or os.PathLike object, not PngImageFile

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: expected str, bytes or os.PathLike object, not PngImageFile
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 013cd6f10a5cb04c7f15e640add22f2b).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 256, in generate_images
    new_image = Image(
                ^^^^^^
  File "<string>", line 4, in __init__
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state.py", line 564, in _initialize_instance
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'UUID' is an invalid keyword argument for Image

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: 'UUID' is an invalid keyword argument for Image
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 65601f00e4a1341f2ffd69a65144bda9).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f3fb4c04b80>, 'cd38bb07-613e-4863-ab5b-8e066727ca2e', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F3FB4C19C50>, 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.OperationalError: table images has no column named user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 263, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table images has no column named user_id
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f3fb4c04b80>, 'cd38bb07-613e-4863-ab5b-8e066727ca2e', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F3FB4C19C50>, 1)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: OperationalError: (sqlite3.OperationalError) table images has no column named user_id
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f3fb4c04b80>, 'cd38bb07-613e-4863-ab5b-8e066727ca2e', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F3FB4C19C50>, 1)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 5a55455b7dbf67a32bbf11c76d6039bb).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BLOB, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	UNIQUE (url)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] (879714655356997692, <memory at 0x7f9ef00d8d00>, '6eb59982-08a1-4990-96e2-083097f7cf2b', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F9EF0109510>, 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.ProgrammingError: Error binding parameter 4: type 'PngImageFile' is not supported

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 263, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f9ef00d8d00>, '6eb59982-08a1-4990-96e2-083097f7cf2b', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F9EF0109510>, 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f9ef00d8d00>, '6eb59982-08a1-4990-96e2-083097f7cf2b', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F9EF0109510>, 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c698af8dc17c17ae0c17a8b21f8c4ffd).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00012s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00012s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	UNIQUE (url)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 3340f222a074643be88cc5fd46c25fe2).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    context = constructor(
              ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 1452, in _init_compiled
    l_param: List[Any] = [
                         ^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 1454, in <listcomp>
    flattened_processors[key](compiled_params[key])
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 893, in process
    return DBAPIBinary(value)
           ^^^^^^^^^^^^^^^^^^
TypeError: memoryview: a bytes-like object is required, not '_io.BytesIO'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 262, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1825, in _execute_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    context = constructor(
              ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 1452, in _init_compiled
    l_param: List[Any] = [
                         ^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 1454, in <listcomp>
    flattened_processors[key](compiled_params[key])
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 893, in process
    return DBAPIBinary(value)
           ^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.StatementError: (builtins.TypeError) memoryview: a bytes-like object is required, not '_io.BytesIO'
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: [{'user_id': 879714655356997692, 'data': <_io.BytesIO object at 0x7f4478c81b70>, 'count': 1, 'url': <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F43D944BE50>, 'UUID': 'ec121c22-978c-405d-be7e-41c4ea5695e2'}]]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: StatementError: (builtins.TypeError) memoryview: a bytes-like object is required, not '_io.BytesIO'
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: [{'user_id': 879714655356997692, 'data': <_io.BytesIO object at 0x7f4478c81b70>, 'count': 1, 'url': <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F43D944BE50>, 'UUID': 'ec121c22-978c-405d-be7e-41c4ea5695e2'}]]
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: f3261c0ded1072ebf38b09cd9daafc42).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 2955f6fc5f61f9540867047d3b9f7c14).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
asyncio - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-17' coro=<WebSocketCommonProtocol.close_connection() running at /home/alex/miniconda3/lib/python3.11/site-packages/websockets/legacy/protocol.py:1312> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:898, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /home/alex/miniconda3/lib/python3.11/asyncio/tasks.py:754]>
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6d9b3996ea1f6a3147445387262c4ca2).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	UNIQUE (url)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7fdf1cf60ac0>, '40e94ce3-259d-407f-a1ad-294f645df1c9', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FE071474890>, 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.ProgrammingError: Error binding parameter 4: type 'PngImageFile' is not supported

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 262, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7fdf1cf60ac0>, '40e94ce3-259d-407f-a1ad-294f645df1c9', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FE071474890>, 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'PngImageFile' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7fdf1cf60ac0>, '40e94ce3-259d-407f-a1ad-294f645df1c9', <PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7FE071474890>, 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ff1bd8e5ddec82e7fe4d82c8c111e207).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: cf69de863b5b1134d12ae2b3b65ede2c).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 255, in generate_images
    image.save(image_path)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/PIL/Image.py", line 2436, in save
    fp = builtins.open(filename, "w+b")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'output/image_1.png'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: FileNotFoundError: [Errno 2] No such file or directory: 'output/image_1.png'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6098b5f9e655a47a5a5862204eacd876).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f80ece00b80>, '77ecd54c-c900-4eda-bf9e-5f7207c29e04', [<PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F8241B44310>], 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.ProgrammingError: Error binding parameter 4: type 'list' is not supported

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 262, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'list' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f80ece00b80>, '77ecd54c-c900-4eda-bf9e-5f7207c29e04', [<PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F8241B44310>], 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 4: type 'list' is not supported
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f80ece00b80>, '77ecd54c-c900-4eda-bf9e-5f7207c29e04', [<PIL.PngImagePlugin.PngImageFile image mode=RGB size=1024x1024 at 0x7F8241B44310>], 1)]
(Background on this error at: https://sqlalche.me/e/20/f405)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 222221cb925a96833a922e3f5e46f423).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 256, in generate_images
    image.save(image_path)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/PIL/Image.py", line 2436, in save
    fp = builtins.open(filename, "w+b")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'output/image_1.png'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: FileNotFoundError: [Errno 2] No such file or directory: 'output/image_1.png'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 9b512e35d852b4da34858b8dbe5038b4).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7ff6b66d4b80>, '49ebc74d-26a4-4653-a274-6c8b8f5118b3', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 252, in slash_command
    collage_path = create_collage(images)
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 39, in create_collage
    num_images = len(images)
                 ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: fd41f5cce2e284cdfbe5795f122b59a5).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f7579474b80>, 'c255e78a-be69-4e4a-8657-b622b930d86c', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: images.url

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 241, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 268, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f7579474b80>, 'c255e78a-be69-4e4a-8657-b622b930d86c', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f7579474b80>, 'c255e78a-be69-4e4a-8657-b622b930d86c', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c8d85f07258c2824f0fe75d06d71b655).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ce4e38b0f4ba1e2f05f9e8693e886566).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d3a0f57c038f9c795ce0692223866610).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f166e118b80>, '3a19e312-87c6-44f2-abf9-0ebf037b9c01', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: images.url

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 224, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 270, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f166e118b80>, '3a19e312-87c6-44f2-abf9-0ebf037b9c01', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f166e118b80>, '3a19e312-87c6-44f2-abf9-0ebf037b9c01', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ab771852643be4aef0a3aee76ebff1ef).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f420475c880>, 'e4158134-27b8-4eff-b843-cd2121ea9e33', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: images.url

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 222, in slash_command
    UUID,images = await generate_images(
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 265, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f420475c880>, 'e4158134-27b8-4eff-b843-cd2121ea9e33', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f420475c880>, 'e4158134-27b8-4eff-b843-cd2121ea9e33', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: ff119c7adfe4f97b8fffa05173c77ad9).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	UNIQUE (url)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (879714655356997692, <memory at 0x7f75c4750d00>, '98aa6db6-c026-4477-a97f-9235c49d2224', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 222, in slash_command
    UUID,images = await generate_images(
    ^^^^^^^^^^^
TypeError: cannot unpack non-iterable NoneType object

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: cannot unpack non-iterable NoneType object
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 73adf750c67673ad968fc2493e963add).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] (879714655356997692, <memory at 0x7f6ba5bfcb80>, '5dc86764-2e38-4a2f-bf6d-416e51e810a7', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: images.url

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 222, in slash_command
    images = await generate_images(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 265, in generate_images
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f6ba5bfcb80>, '5dc86764-2e38-4a2f-bf6d-416e51e810a7', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: images.url
[SQL: INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?)]
[parameters: (879714655356997692, <memory at 0x7f6ba5bfcb80>, '5dc86764-2e38-4a2f-bf6d-416e51e810a7', 'output/image_1.png', 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
discord.gateway - INFO - Shard ID None has successfully RESUMED session 73adf750c67673ad968fc2493e963add.
discord.gateway - INFO - Shard ID None has successfully RESUMED session 73adf750c67673ad968fc2493e963add.
discord.gateway - INFO - Shard ID None has successfully RESUMED session 73adf750c67673ad968fc2493e963add.
discord.gateway - INFO - Shard ID None has successfully RESUMED session 73adf750c67673ad968fc2493e963add.
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 242ca4f2d183afe3558c32f24857a87a).
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a6ec588b96d7e5ad51f0df5e2051e101).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00012s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f5b9c480700>, '8529fa41-67d8-4ed0-b64e-0dcd2847c613', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f5b9c480ac0>, '8529fa41-67d8-4ed0-b64e-0dcd2847c613', 'output/image_2.png', 2)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f5b9c480b80>, '8529fa41-67d8-4ed0-b64e-0dcd2847c613', 'output/image_3.png', 3)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f5b9c480c40>, '8529fa41-67d8-4ed0-b64e-0dcd2847c613', 'output/image_4.png', 4)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 237, in slash_command
    buttons_view = Buttons(prompt, negative_prompt, images)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Buttons.__init__() missing 1 required keyword-only argument: 'UUID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: Buttons.__init__() missing 1 required keyword-only argument: 'UUID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d39c40a0e8245cb30a21f81b7fe76e16).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 84476ec6b134bad061e37c6aa4f79fb8).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fbf0745c580>, 'a34d9eaa-b85b-472a-94df-79686c435b34', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fbf0745c940>, 'a34d9eaa-b85b-472a-94df-79686c435b34', 'output/image_2.png', 2)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fbf0745ca00>, 'a34d9eaa-b85b-472a-94df-79686c435b34', 'output/image_3.png', 3)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fbf0745cac0>, 'a34d9eaa-b85b-472a-94df-79686c435b34', 'output/image_4.png', 4)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 237, in slash_command
    buttons_view = Buttons(prompt, negative_prompt, images, UUID=UUID)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 94, in __init__
    len(images) * 2 + 1
    ^^^^^^^^^^^
TypeError: object of type 'NoneType' has no len()

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: object of type 'NoneType' has no len()
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4305851e1c672084391df3199518f665).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: be46fbc5ea50e9b9511496c47298cffc).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2c5067c7c0>, '25240c3a-67bf-48f2-900b-e31d27843a31', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2c5067cb80>, '25240c3a-67bf-48f2-900b-e31d27843a31', 'output/image_2.png', 2)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2c5067cc40>, '25240c3a-67bf-48f2-900b-e31d27843a31', 'output/image_3.png', 3)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2c5067cd00>, '25240c3a-67bf-48f2-900b-e31d27843a31', 'output/image_4.png', 4)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 298, in slash_command
    buttons_view = Buttons(prompt, negative_prompt, images, UUID=UUID, user_id=user_id, url=collage_path)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Buttons.__init__() got multiple values for argument 'UUID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: Buttons.__init__() got multiple values for argument 'UUID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 8711579428ff2ed8f3bb031e36c55ff0).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f141e4f07c0>, '27e964fc-4901-45ae-93ab-7d779e2fa885', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f141e4f0b80>, '27e964fc-4901-45ae-93ab-7d779e2fa885', 'output/image_2.png', 2)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f141e4f0c40>, '27e964fc-4901-45ae-93ab-7d779e2fa885', 'output/image_3.png', 3)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f141e4f0d00>, '27e964fc-4901-45ae-93ab-7d779e2fa885', 'output/image_4.png', 4)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 299, in slash_command
    buttons_view = Buttons(prompt, negative_prompt, UUID, user_id, collage_path)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 106, in __init__
    images = asyncio.run(get_images())
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/asyncio/runners.py", line 186, in run
    raise RuntimeError(
RuntimeError: asyncio.run() cannot be called from a running event loop

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: RuntimeError: asyncio.run() cannot be called from a running event loop
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a3a88a7539200b1f76be8a162174a77e).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fdb58864640>, '5b6404f2-1d3c-46cb-9eb5-311abd867de3', 'output/image_1.png', 1)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fdb58864a00>, '5b6404f2-1d3c-46cb-9eb5-311abd867de3', 'output/image_2.png', 2)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fdb58864ac0>, '5b6404f2-1d3c-46cb-9eb5-311abd867de3', 'output/image_3.png', 3)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count) VALUES (?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fdb58864b80>, '5b6404f2-1d3c-46cb-9eb5-311abd867de3', 'output/image_4.png', 4)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 304, in slash_command
    file = discord.File(collage_path, filename="collage.png")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/file.py", line 97, in __init__
    self.fp = open(fp, 'rb')
              ^^^^^^^^^^^^^^
TypeError: expected str, bytes or os.PathLike object, not coroutine

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: expected str, bytes or os.PathLike object, not coroutine
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('5b6404f2-1d3c-46cb-9eb5-311abd867de3', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 42372440603c0a9d3cb9ee8db2e5514e).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	model VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53b8700c40>, 'dc5ada8d-f489-4cef-bbb8-b7e6bd444418', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53b8700880>, 'dc5ada8d-f489-4cef-bbb8-b7e6bd444418', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53b8700d00>, 'dc5ada8d-f489-4cef-bbb8-b7e6bd444418', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53b8700dc0>, 'dc5ada8d-f489-4cef-bbb8-b7e6bd444418', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model 
FROM images 
WHERE images."UUID" = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('dc5ada8d-f489-4cef-bbb8-b7e6bd444418',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? AND images.count = ? AND images.url = ? AND images.model = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('dc5ada8d-f489-4cef-bbb8-b7e6bd444418', 879714655356997692, 1, 'collage_dc5ada8d-f489-4cef-bbb8-b7e6bd444418.png', 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 8b15224da13f95df2f1f73164b0cbd70).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 690aa4ddb03ca3e13530713990463960).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 740875e1dbb4bf85bb3ef000b4852947).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	model VARCHAR, 
	prompt VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6dd63dc1c22fa7c9ce6d622926e2b56a).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f63b138c580>, 'a2346b44-eb78-4121-8d54-80ef029c27ce', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f63b138c940>, 'a2346b44-eb78-4121-8d54-80ef029c27ce', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f63b138ca00>, 'a2346b44-eb78-4121-8d54-80ef029c27ce', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f63b138cac0>, 'a2346b44-eb78-4121-8d54-80ef029c27ce', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('a2346b44-eb78-4121-8d54-80ef029c27ce',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 309, in slash_command
    collage_path = await create_collage(UUID)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 291, in create_collage
    image_width, image_height = images[0].width, images[0].height  # Assuming all images have the same size
                                ^^^^^^^^^^^^^^^
AttributeError: 'Image' object has no attribute 'width'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'Image' object has no attribute 'width'
discord.client - INFO - logging in using static token
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: be53b0698da696d8a79cb0a8cd7d461f).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fd7fc5e0640>, '4d48a832-10ae-4ed5-8335-5f4868b04989', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fd7fc5e0a00>, '4d48a832-10ae-4ed5-8335-5f4868b04989', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fd7fc5e0ac0>, '4d48a832-10ae-4ed5-8335-5f4868b04989', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fd7fc5e0b80>, '4d48a832-10ae-4ed5-8335-5f4868b04989', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('4d48a832-10ae-4ed5-8335-5f4868b04989',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? AND images.count = ? AND images.url = ? AND images.model = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('4d48a832-10ae-4ed5-8335-5f4868b04989', 879714655356997692, 1, 'collage_4d48a832-10ae-4ed5-8335-5f4868b04989.png', 'proteus-rundiffusionV2.5')
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 345084fb27579f434a5ad1792f68a3a5).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f4765268700>, '3c009de8-51cd-4975-b485-b3a98f1f5ec2', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f4765268a00>, '3c009de8-51cd-4975-b485-b3a98f1f5ec2', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f4765268ac0>, '3c009de8-51cd-4975-b485-b3a98f1f5ec2', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f4765268b80>, '3c009de8-51cd-4975-b485-b3a98f1f5ec2', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('3c009de8-51cd-4975-b485-b3a98f1f5ec2',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('3c009de8-51cd-4975-b485-b3a98f1f5ec2', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 6b8060b8dc73f62091ef9be2297e552f).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f6a2b420700>, 'ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f6a2b420ac0>, 'ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f6a2b420b80>, 'ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f6a2b420c40>, 'ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 315, in slash_command
    invite_link = generate_bot_invite_link(client_id)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: __await__() returned a coroutine

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: __await__() returned a coroutine
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('ee6ed249-019e-41cc-b1eb-b7cc6d9f0a3d', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 051ed2351f079cc0c47f2ecc426a644d).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f9a72420700>, '76cf9636-1b43-45e7-b8c6-02c36765e5ab', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f9a72420ac0>, '76cf9636-1b43-45e7-b8c6-02c36765e5ab', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f9a72420b80>, '76cf9636-1b43-45e7-b8c6-02c36765e5ab', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f9a72420c40>, '76cf9636-1b43-45e7-b8c6-02c36765e5ab', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('76cf9636-1b43-45e7-b8c6-02c36765e5ab',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 297, in slash_command
    buttons_view = await Buttons(prompt, negative_prompt, UUID, user_id, collage_path, model)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Buttons.__init__() missing 1 required positional argument: 'images'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: Buttons.__init__() missing 1 required positional argument: 'images'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c974fb8dae460fe94722a112c0706dd4).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2334704640>, 'be5965fa-7d6f-496c-8661-ed7665e6ebc3', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2334704ac0>, 'be5965fa-7d6f-496c-8661-ed7665e6ebc3', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2334704b80>, 'be5965fa-7d6f-496c-8661-ed7665e6ebc3', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2334704c40>, 'be5965fa-7d6f-496c-8661-ed7665e6ebc3', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ('be5965fa-7d6f-496c-8661-ed7665e6ebc3',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('be5965fa-7d6f-496c-8661-ed7665e6ebc3', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 297, in slash_command
    buttons_view = await Buttons.create(prompt, negative_prompt, UUID, user_id, collage_path, model)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 132, in create
    return cls(prompt, negative_prompt, UUID, user_id, url, model, images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 119, in __init__
    self.add_item(discord.ui.Button(label="Re-roll", style=discord.ButtonStyle.green, emoji="", row=reroll_row, custom_id="reroll", callback=self.reroll_image))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Button.__init__() got an unexpected keyword argument 'callback'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: Button.__init__() got an unexpected keyword argument 'callback'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 64bad32705a7dc1f7a0fee7e9621cf32).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 48300daffa373f27d820ab9571308944).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f402b01c580>, '42627f33-43c9-4d78-afed-7d151b536260', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f402b01c940>, '42627f33-43c9-4d78-afed-7d151b536260', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f402b01ca00>, '42627f33-43c9-4d78-afed-7d151b536260', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f402b01cac0>, '42627f33-43c9-4d78-afed-7d151b536260', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('42627f33-43c9-4d78-afed-7d151b536260',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('42627f33-43c9-4d78-afed-7d151b536260', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 278, in slash_command
    buttons_view = await Buttons.create(prompt, negative_prompt, UUID, user_id, collage_path, model)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 131, in create
    return cls(prompt, negative_prompt, UUID, user_id, url, model, images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 111, in __init__
    btn = ImageButton(f"V{idx + 1}", "", row, self.generate_alternatives_and_send)
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Buttons' object has no attribute 'generate_alternatives_and_send'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'Buttons' object has no attribute 'generate_alternatives_and_send'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: bbfb620430cfabc8a8303dcfa6940aff).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fb6dc1fc580>, '81f227f1-6459-490a-99a1-561013f67608', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fb6dc1fc940>, '81f227f1-6459-490a-99a1-561013f67608', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fb6dc1fca00>, '81f227f1-6459-490a-99a1-561013f67608', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fb6dc1fcac0>, '81f227f1-6459-490a-99a1-561013f67608', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('81f227f1-6459-490a-99a1-561013f67608',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('81f227f1-6459-490a-99a1-561013f67608', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 539614961d56aed689d5b07bd96b56aa).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 5a6ccbc67cbb06ea9f9a01ab1a42dde1).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('0af41c58-40f9-488a-ab00-090d57caf29e',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 274, in slash_command
    collage_path = await create_collage(UUID)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/imageGen.py", line 291, in create_collage
    raise ValueError("No images found in the database for the given UUID.")
ValueError: No images found in the database for the given UUID.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: ValueError: No images found in the database for the given UUID.
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f05f15b0ac0>, '033aea50-92d5-4e7e-ab45-526ce06d072b', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'an orange tabby cat sitting on a stool in front of a glowing electric keyboard, looking ready to play. Include posters of bands with cat faces in the background and the caption "When your cat\'s playlist is more lit than yours" above in a playful font., masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f05f15b0dc0>, '033aea50-92d5-4e7e-ab45-526ce06d072b', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'an orange tabby cat sitting on a stool in front of a glowing electric keyboard, looking ready to play. Include posters of bands with cat faces in the background and the caption "When your cat\'s playlist is more lit than yours" above in a playful font., masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f05f15b0e80>, '033aea50-92d5-4e7e-ab45-526ce06d072b', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'an orange tabby cat sitting on a stool in front of a glowing electric keyboard, looking ready to play. Include posters of bands with cat faces in the background and the caption "When your cat\'s playlist is more lit than yours" above in a playful font., masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f05f15b0f40>, '033aea50-92d5-4e7e-ab45-526ce06d072b', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'an orange tabby cat sitting on a stool in front of a glowing electric keyboard, looking ready to play. Include posters of bands with cat faces in the background and the caption "When your cat\'s playlist is more lit than yours" above in a playful font., masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [cached since 3.717s ago] ('033aea50-92d5-4e7e-ab45-526ce06d072b',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('033aea50-92d5-4e7e-ab45-526ce06d072b', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.client - ERROR - Attempting a reconnect in 0.26s
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/connector.py", line 1155, in _create_direct_connection
    hosts = await asyncio.shield(host_resolved)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/connector.py", line 874, in _resolve_host
    addrs = await self._resolver.resolve(host, port, family=self._family)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/resolver.py", line 33, in resolve
    infos = await self._loop.getaddrinfo(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/asyncio/base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno -2] Name or service not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/client.py", line 656, in connect
    self.ws = await asyncio.wait_for(coro, timeout=60.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/gateway.py", line 372, in from_client
    socket = await client.http.ws_connect(str(url))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/http.py", line 537, in ws_connect
    return await self.__session.ws_connect(url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/client.py", line 779, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/client.py", line 536, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/connector.py", line 540, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/connector.py", line 901, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiohttp/connector.py", line 1169, in _create_direct_connection
    raise ClientConnectorError(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host gateway.discord.gg:443 ssl:default [Name or service not known]
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 21f22d728d7e53978437add9cb46ceb8).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits FLOAT, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	model VARCHAR, 
	prompt VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f13585a87c0>, '7ffcbdc9-5b91-4035-bffb-56fd25ee02f3', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality,, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f13585a8b80>, '7ffcbdc9-5b91-4035-bffb-56fd25ee02f3', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality,, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f13585a8c40>, '7ffcbdc9-5b91-4035-bffb-56fd25ee02f3', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality,, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f13585a8d00>, '7ffcbdc9-5b91-4035-bffb-56fd25ee02f3', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality,, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('7ffcbdc9-5b91-4035-bffb-56fd25ee02f3',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('7ffcbdc9-5b91-4035-bffb-56fd25ee02f3', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c92e73fc540ed244b95e0cee9707092f).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564c700>, '9eca3bd6-4c94-4a89-9fff-9f6306f8054a', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564cac0>, '9eca3bd6-4c94-4a89-9fff-9f6306f8054a', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564cb80>, '9eca3bd6-4c94-4a89-9fff-9f6306f8054a', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564cc40>, '9eca3bd6-4c94-4a89-9fff-9f6306f8054a', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('9eca3bd6-4c94-4a89-9fff-9f6306f8054a',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('9eca3bd6-4c94-4a89-9fff-9f6306f8054a', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [cached since 162.5s ago (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564d180>, '86268a45-2097-470e-aec3-f6734173e343', 'output/image_1.png', 1, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564d540>, '86268a45-2097-470e-aec3-f6734173e343', 'output/image_2.png', 2, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564d480>, '86268a45-2097-470e-aec3-f6734173e343', 'output/image_3.png', 3, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f939564cb80>, '86268a45-2097-470e-aec3-f6734173e343', 'output/image_4.png', 4, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [cached since 162.5s ago] ('86268a45-2097-470e-aec3-f6734173e343',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [cached since 162.5s ago] ('86268a45-2097-470e-aec3-f6734173e343', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.ui.view - ERROR - Ignoring exception in view <Buttons timeout=10000000000000 children=8> for item <ImageButton style=<ButtonStyle.secondary: 2> url=None disabled=False label='U4' emoji=<PartialEmoji animated=False name='' id=None> row=2>
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/ui/view.py", line 427, in _scheduled_task
    await item.callback(interaction)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 85, in callback
    await self._callback(interaction, self)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 182, in upscale_image
    index = int(button.custom_id[1:]) - 1  # Extract index from custom_id
            ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: '096ace116ea131fe8d175bb8978613a'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d4281f230ce91d39a7a0782a45bf9600).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53c80d0700>, '4ffcdbbd-5cee-444c-8675-1dd200e23da1', 'output/image_1.png', 1, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53c80d0ac0>, '4ffcdbbd-5cee-444c-8675-1dd200e23da1', 'output/image_2.png', 2, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53c80d0b80>, '4ffcdbbd-5cee-444c-8675-1dd200e23da1', 'output/image_3.png', 3, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f53c80d0c40>, '4ffcdbbd-5cee-444c-8675-1dd200e23da1', 'output/image_4.png', 4, 'AnimeP', 'anime art, beautiful closeup of a woman playing the piano, hand focus, masterpiece, best quality, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('4ffcdbbd-5cee-444c-8675-1dd200e23da1',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('4ffcdbbd-5cee-444c-8675-1dd200e23da1', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 1b6b8f2f02cac888e5cca1d5dece0a14).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fe012135840>, '7c6d8036-eb64-49e0-b0f0-a090bc4a7da2', 'output/image_1.png', 1, 'AnimeP', 'Sacred_beast, gold oriental dragon, mystical, aura, (particle effects), lightning, (background storm clouds), ((background thunder)), glowing blue eyes, best quality, masterpiece, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fe003f60ac0>, '7c6d8036-eb64-49e0-b0f0-a090bc4a7da2', 'output/image_2.png', 2, 'AnimeP', 'Sacred_beast, gold oriental dragon, mystical, aura, (particle effects), lightning, (background storm clouds), ((background thunder)), glowing blue eyes, best quality, masterpiece, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fe003f60b80>, '7c6d8036-eb64-49e0-b0f0-a090bc4a7da2', 'output/image_3.png', 3, 'AnimeP', 'Sacred_beast, gold oriental dragon, mystical, aura, (particle effects), lightning, (background storm clouds), ((background thunder)), glowing blue eyes, best quality, masterpiece, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fe003f60c40>, '7c6d8036-eb64-49e0-b0f0-a090bc4a7da2', 'output/image_4.png', 4, 'AnimeP', 'Sacred_beast, gold oriental dragon, mystical, aura, (particle effects), lightning, (background storm clouds), ((background thunder)), glowing blue eyes, best quality, masterpiece, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('7c6d8036-eb64-49e0-b0f0-a090bc4a7da2',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('7c6d8036-eb64-49e0-b0f0-a090bc4a7da2', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [cached since 390.9s ago] ('7c6d8036-eb64-49e0-b0f0-a090bc4a7da2',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.client - INFO - logging in using static token
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: a306a04352ecbe603a889355cbc8ac78).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR, 
	email VARCHAR, 
	"discordID" VARCHAR, 
	"stripeID" VARCHAR, 
	"hiveID" VARCHAR, 
	credits INTEGER, 
	tier INTEGER, 
	banned BOOLEAN, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_username ON users (username)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_hiveID" ON users ("hiveID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX "ix_users_discordID" ON users ("discordID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX "ix_users_stripeID" ON users ("stripeID")
sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE guilds (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	banned BOOLEAN, 
	owner INTEGER, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_guilds_id ON guilds (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE channels (
	id INTEGER NOT NULL, 
	nsfw BOOLEAN, 
	name VARCHAR, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_channels_id ON channels (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE jobs (
	id INTEGER NOT NULL, 
	data JSON, 
	PRIMARY KEY (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_jobs_id ON jobs (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE payments (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	type VARCHAR, 
	timestamp DATETIME, 
	txid VARCHAR, 
	"confirmedAt" DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00004s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_payments_id ON payments (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - 
CREATE TABLE images (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	data BINARY, 
	"UUID" VARCHAR, 
	url VARCHAR, 
	count INTEGER, 
	model VARCHAR, 
	prompt VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_images_id ON images (id)
sqlalchemy.engine.Engine - INFO - [no key 0.00003s] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - ERROR - Ignoring exception in on_ready
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/client.py", line 441, in _run_event
    await coro(*args, **kwargs)
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 44, in on_ready
    discord_recharge_prompt()
TypeError: discord_recharge_prompt() missing 1 required positional argument: 'discord_interaction'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 973f7f0af25bd51ce457ae39004da3e4).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 227, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(interaction)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StripeIntegration.discord_balance_prompt() missing 1 required positional argument: 'discord_interaction'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: StripeIntegration.discord_balance_prompt() missing 1 required positional argument: 'discord_interaction'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 017e5e65b544d0525aaef2425291c78f).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 227, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(discord_interaction=interaction)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StripeIntegration.discord_balance_prompt() missing 1 required positional argument: 'self'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: StripeIntegration.discord_balance_prompt() missing 1 required positional argument: 'self'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c7cf96ebd3038112d3d0be0167949adc).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 227, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(discord_interaction=interaction)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 88, in discord_balance_prompt
    user = await session.get(User, discordID=user_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 635e694a8eb0075f90be20575a94abe2).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 227, in slash_command
    username = interaction.user.username
               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Member' object has no attribute 'username'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'Member' object has no attribute 'username'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: faaf7d74d6b02a22b092fb3a8fa4187d).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 88, in discord_balance_prompt
    user = await session.get(User, discordID=user_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 38a0bc5982f00b184272ce55c71121b7).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 88, in discord_balance_prompt
    user = await session.get(User, discordID=user_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4ef9241ae60946acb3c9170fdcf41fa5).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 88, in discord_balance_prompt
    user = await session.get(User, discordID=user_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: AsyncSession.get() got an unexpected keyword argument 'discordID'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 5b5813b051fe536dfe2c79baa1f64401).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users."discordID" AS "users_discordID", users."stripeID" AS "users_stripeID", users."hiveID" AS "users_hiveID", users.credits AS users_credits, users.tier AS users_tier, users.banned AS users_banned 
FROM users 
WHERE users.id = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 90, in discord_balance_prompt
    user = await session.query(User).filter(User.discordID == user_id).one_or_none()
                 ^^^^^^^^^^^^^
AttributeError: 'AsyncSession' object has no attribute 'query'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: AttributeError: 'AsyncSession' object has no attribute 'query'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: faf1a73318ec55508fa103c517662034).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: aa30c8badad16a8272211558eb46f9a5).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users."discordID" AS "users_discordID", users."stripeID" AS "users_stripeID", users."hiveID" AS "users_hiveID", users.credits AS users_credits, users.tier AS users_tier, users.banned AS users_banned 
FROM users 
WHERE users.id = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - INSERT INTO users (username, email, "discordID", "stripeID", "hiveID", credits, tier, banned) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] (879714655356997692, None, 'datarevised', None, None, 100, 0, 0)
sqlalchemy.engine.Engine - INFO - COMMIT
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 93, in discord_balance_prompt
    return user.credits
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 1653, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2181, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2050, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1144, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3280, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3304, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 308, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 352, in connect
    await_only(connection),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: be3aa1b43da2dfe14d2a71a02032e01b).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users."discordID", users."stripeID", users."hiveID", users.credits, users.tier, users.banned 
FROM users 
WHERE users.id = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - INSERT INTO users (username, email, "discordID", "stripeID", "hiveID", credits, tier, banned) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (879714655356997692, None, 'datarevised', None, None, 100, 0, 0)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: users.discordID

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 229, in slash_command
    user_credits = await StripeIntegration.discord_balance_prompt(username, user_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/stripe_integration.py", line 92, in discord_balance_prompt
    await session.commit()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.discordID
[SQL: INSERT INTO users (username, email, "discordID", "stripeID", "hiveID", credits, tier, banned) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (879714655356997692, None, 'datarevised', None, None, 100, 0, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 846, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.discordID
[SQL: INSERT INTO users (username, email, "discordID", "stripeID", "hiveID", credits, tier, banned) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (879714655356997692, None, 'datarevised', None, None, 100, 0, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c9bb725eb90741c8252a4493a455428e).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users."discordID", users."stripeID", users."hiveID", users.credits, users.tier, users.banned 
FROM users 
WHERE users."discordID" = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f04e2a99c00>, 'c563b522-f204-47a2-b75a-46ff39453a30', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'DB, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f04e2a99f00>, 'c563b522-f204-47a2-b75a-46ff39453a30', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'DB, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f04e2a99fc0>, 'c563b522-f204-47a2-b75a-46ff39453a30', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'DB, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f04e2a9a080>, 'c563b522-f204-47a2-b75a-46ff39453a30', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'DB, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('c563b522-f204-47a2-b75a-46ff39453a30',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('c563b522-f204-47a2-b75a-46ff39453a30', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.app_commands.tree - ERROR - Ignoring exception in command 'imagine'
Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 828, in _do_call
    return await self._callback(interaction, **params)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/Documents/ComfyUI-SDXL-DiscordBot2/bot.py", line 280, in slash_command
    deduct_credits(interaction.user.id)
TypeError: deduct_credits() missing 1 required positional argument: 'amount'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/tree.py", line 1248, in _call
    await command._invoke_with_namespace(interaction, namespace)
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 853, in _invoke_with_namespace
    return await self._do_call(interaction, transformed_values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alex/miniconda3/lib/python3.11/site-packages/discord/app_commands/commands.py", line 842, in _do_call
    raise CommandInvokeError(self, e) from e
discord.app_commands.errors.CommandInvokeError: Command 'imagine' raised an exception: TypeError: deduct_credits() missing 1 required positional argument: 'amount'
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 2cf9b87ddc0c841231f89a4cf441cc99).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users."discordID", users."stripeID", users."hiveID", users.credits, users.tier, users.banned 
FROM users 
WHERE users."discordID" = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2eee659a80>, 'b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2eee659d80>, 'b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2eee659e40>, 'b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7f2eee659f00>, 'b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ('b5e7fbd0-06e4-4b3d-ae5c-8c52e3a4b194', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
discord.client - INFO - logging in using static token
discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 89d489470917242850bdf6284b53306e).
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users."discordID", users."stripeID", users."hiveID", users.credits, users.tier, users.banned 
FROM users 
WHERE users."discordID" = ?
sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('datarevised',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("guilds")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("channels")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("payments")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("images")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("jobs")
sqlalchemy.engine.Engine - INFO - [raw sql] ()
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fc75452dc00>, '15eaea46-7e5a-4665-9aa1-72dd5d312614', 'output/image_1.png', 1, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fc75452df00>, '15eaea46-7e5a-4665-9aa1-72dd5d312614', 'output/image_2.png', 2, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fc75452dfc0>, '15eaea46-7e5a-4665-9aa1-72dd5d312614', 'output/image_3.png', 3, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - INSERT INTO images (user_id, data, "UUID", url, count, model, prompt) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (879714655356997692, <memory at 0x7fc75452e080>, '15eaea46-7e5a-4665-9aa1-72dd5d312614', 'output/image_4.png', 4, 'proteus-rundiffusionV2.5', 'got it working somewhat with the DB!, masterpiece, best quality')
sqlalchemy.engine.Engine - INFO - COMMIT
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('15eaea46-7e5a-4665-9aa1-72dd5d312614',)
sqlalchemy.engine.Engine - INFO - ROLLBACK
sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
sqlalchemy.engine.Engine - INFO - SELECT images.id, images.user_id, images.data, images."UUID", images.url, images.count, images.model, images.prompt 
FROM images 
WHERE images."UUID" = ? AND images.user_id = ? ORDER BY images.count
sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('15eaea46-7e5a-4665-9aa1-72dd5d312614', 879714655356997692)
sqlalchemy.engine.Engine - INFO - ROLLBACK
